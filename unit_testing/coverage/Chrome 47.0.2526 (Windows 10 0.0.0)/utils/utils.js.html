<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for utils\utils.js</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="../prettify.css"/>
    <link rel="stylesheet" href="../base.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1>
            <a href="../index.html">all files</a> / <a href="index.html">utils/</a> utils.js
        </h1>

        <div class='clearfix'>
            <div class='fl pad1y space-right2'>
                <span class="strong">21.54% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>14/65</span>
            </div>
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/60</span>
            </div>
            <div class='fl pad1y space-right2'>
                <span class="strong">7.69% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>1/13</span>
            </div>
            <div class='fl pad1y space-right2'>
                <span class="strong">21.54% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>14/65</span>
            </div>
    </div>
    </div>
    <div class='status-line low'></div>
<pre><table class="coverage">
    <tr>
        <td class="line-count quiet">1
            2
            3
            4
            5
            6
            7
            8
            9
            10
            11
            12
            13
            14
            15
            16
            17
            18
            19
            20
            21
            22
            23
            24
            25
            26
            27
            28
            29
            30
            31
            32
            33
            34
            35
            36
            37
            38
            39
            40
            41
            42
            43
            44
            45
            46
            47
            48
            49
            50
            51
            52
            53
            54
            55
            56
            57
            58
            59
            60
            61
            62
            63
            64
            65
            66
            67
            68
            69
            70
            71
            72
            73
            74
            75
            76
            77
            78
            79
            80
            81
            82
            83
            84
            85
            86
            87
            88
            89
            90
            91
            92
            93
            94
            95
            96
            97
            98
            99
            100
            101
            102
            103
            104
            105
            106
            107
            108
            109
            110
            111
            112
            113
            114
            115
            116
            117
            118
            119
            120
            121
            122
            123
            124
            125
            126
            127
            128
            129
            130
            131
            132
            133
            134
            135
            136
            137
            138
            139
            140
            141
            142
            143
            144
            145
            146
            147
            148
            149
            150
            151
            152
            153
            154
            155
            156
            157
            158
            159
            160
            161
            162
            163
        </td>
        <td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-no">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-yes">1×</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span>
            <span class="cline-any cline-neutral">&nbsp;</span></td>
        <td class="text"><pre class="prettyprint lang-js">define(["lodash", "backbone"], function (_, Backbone) {
    "use strict";
&nbsp;
<span class="fstat-no" title="function not covered">    function getDayFromIdx(idx) {</span>
<span class="cstat-no" title="statement not covered">        var dayArr = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];</span>
&nbsp;
<span class="cstat-no" title="statement not covered">        return dayArr[idx];</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered">    function getMonthFromIdx(idx) {</span>
<span class="cstat-no" title="statement not covered">        var monthArr = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "November", "December"];</span>
&nbsp;
<span class="cstat-no" title="statement not covered">        return monthArr[idx];</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered">    function convertToDate(time) {</span> //time: SECONDS from January 1st, 1970
<span class="cstat-no" title="statement not covered">        var date = new Date(parseFloat(time) * 1000);</span>
&nbsp;
<span class="cstat-no" title="statement not covered">        return getDayFromIdx(date.getDay()) + ", " + getMonthFromIdx(date.getMonth()) + " " + date.getDate();</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered">    function convertToTime(time) {</span>
<span class="cstat-no" title="statement not covered">        var date = new Date(parseFloat(time) * 1000),</span>
            hours = date.getHours(),
            minutes = date.getMinutes();
&nbsp;
<span class="cstat-no" title="statement not covered">        if (hours &lt; 10) {</span>
<span class="cstat-no" title="statement not covered">            hours = "0" + hours;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered">        if (minutes &lt; 10) {</span>
<span class="cstat-no" title="statement not covered">            minutes = "0" + minutes;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered">        return hours + ":" + minutes;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered">    function convertToWeekday(time) {</span>
<span class="cstat-no" title="statement not covered">        var date = new Date(parseFloat(time) * 1000),</span>
            dayArr = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"];
&nbsp;
<span class="cstat-no" title="statement not covered">        return dayArr[date.getDay()];</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered">    function convertToF(temp) {</span>
<span class="cstat-no" title="statement not covered">        return (parseFloat(temp) * 1.8 + 32).toFixed(0);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered">    function getTimeByOffset(time, offset) {</span>
<span class="cstat-no"
      title="statement not covered">        var myOffset = -(new Date()).getTimezoneOffset() / 60,</span>
            localTime = time + (offset - myOffset) * 3600;
&nbsp;
<span class="cstat-no" title="statement not covered">        return convertToTime(localTime);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered">    function getWindDirection(windBearing) {</span>
<span class="cstat-no" title="statement not covered">        windBearing = parseFloat(windBearing);</span>
&nbsp;
<span class="cstat-no" title="statement not covered">        if ((350 &lt;= windBearing &amp;&amp; windBearing &lt; 359.999) || (0 &lt;= windBearing &amp;&amp; windBearing &lt; 10)) {</span>
<span class="cstat-no" title="statement not covered">            return "N";</span>
        } else <span class="cstat-no" title="statement not covered">if (10 &lt;= windBearing &amp;&amp; windBearing &lt; 80) {</span>
<span class="cstat-no" title="statement not covered">            return "NE"</span>
        } else <span class="cstat-no" title="statement not covered">if (80 &lt;= windBearing &amp;&amp; windBearing &lt; 100) {</span>
<span class="cstat-no" title="statement not covered">            return "E";</span>
        } else <span class="cstat-no" title="statement not covered">if (100 &lt;= windBearing &amp;&amp; windBearing &lt; 170) {</span>
<span class="cstat-no" title="statement not covered">            return "SE"</span>
        } else <span class="cstat-no" title="statement not covered">if (170 &lt;= windBearing &amp;&amp; windBearing &lt; 190) {</span>
<span class="cstat-no" title="statement not covered">            return "S";</span>
        } else <span class="cstat-no" title="statement not covered">if (190 &lt;= windBearing &amp;&amp; windBearing &lt; 260) {</span>
<span class="cstat-no" title="statement not covered">            return "SW"</span>
        } else <span class="cstat-no" title="statement not covered">if (260 &lt;= windBearing &amp;&amp; windBearing &lt; 280) {</span>
<span class="cstat-no" title="statement not covered">            return "W";</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered">        return "NW";</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered">    function getSunPosition(sunRadius, currentTime, sunriseTime, sunsetTime) {</span>
<span class="cstat-no" title="statement not covered">        var W = innerWidth, //browser width</span>
            H = innerHeight, //browser height
            h = W &gt; H ? H * 0.5 : W / 2,//highest point of the sun at noon
            R = W * W / (8 * h) + h / 2, //circle trajectory radius
            alpha = 2 * Math.acos((R - h) / R), //angle created by two furthest radius at the edge of screen
            gamma = 2 * Math.asin(sunRadius / (2 * R)), // angle created by two furthest radius at the edge of screen plus radius of the sun
            phi = alpha + 2 * gamma,
            t = (currentTime - sunriseTime) / (sunsetTime - sunriseTime), //portion between passed time from sunrise vs whole day time
            phiDeg = phi / Math.PI * 180; //convert phi to degree
&nbsp;
<span class="cstat-no" title="statement not covered">        return 180 - (phiDeg * t - phiDeg / 2);</span>
    }
&nbsp;
    /**
     * Get static options and cache all the value to DashboardView
     * @param sunRadius
     * @returns {{Xc: number, Yc: number, R: number, sunSetDeg: number, sunRiseDeg: number}}
     */
&nbsp;
<span class="fstat-no" title="function not covered">    function getSunOptions(sunRadius) {</span>
<span class="cstat-no" title="statement not covered">        var W = innerWidth, //browser width</span>
            H = innerHeight, //browser height
            h = H * 0.5,//highest point of the sun at noon
            R = W * W / (8 * h) + h / 2, //circle trajectory radius
            Xc = W / 2 - sunRadius, //circle trajectory center X-coordinate
            Yc = H * 0.5 + R - sunRadius, //circle trajectory center Y-coordinate
            alpha = 2 * Math.acos((R - h) / R), //angle created by two furthest radius at the edge of screen
            gamma = 2 * Math.asin(sunRadius / (2 * R)), // angle created by two furthest radius at the edge of screen plus radius of the sun
            phi = alpha + 2 * gamma,
            phiDeg = phi / Math.PI * 180;
&nbsp;
<span class="cstat-no" title="statement not covered">        return {</span>
            Xc: Xc,
            Yc: Yc,
            R: R,
            sunSetDeg: 180 - phiDeg / 2, //angle at which sun set relative to SOUTH
            sunRiseDeg: 180 + phiDeg / 2 //angle at which sun rise relative to SOUTH
        }
    }
&nbsp;
    /**
     * Return angle relative to SOUTH
     * @param currentCoords
     * @param centerCoords
     * @returns {number}
     */
&nbsp;
<span class="fstat-no"
      title="function not covered">    function getCurrentPosition(currentCoords, centerCoords) {</span>
<span class="cstat-no" title="statement not covered">        var angle = Math.atan((centerCoords.left - currentCoords.left) / (centerCoords.top - currentCoords.top));</span>
&nbsp;
<span class="cstat-no" title="statement not covered">        return 180 + angle / Math.PI * 180;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered">    function getMoonPhase(moonPhase) {</span>
<span class="cstat-no" title="statement not covered">        if (moonPhase &lt; 0.1 || 0.9 &lt;= moonPhase) {</span>
<span class="cstat-no" title="statement not covered">            return "empty-moon";</span>
        } else <span class="cstat-no" title="statement not covered">if (0.1 &lt;= moonPhase &amp;&amp; moonPhase &lt; 0.25) {</span>
<span class="cstat-no" title="statement not covered">            return "young-moon";</span>
        } else <span class="cstat-no" title="statement not covered">if (0.25 &lt;= moonPhase &amp;&amp; moonPhase &lt; 0.45) {</span>
<span class="cstat-no" title="statement not covered">            return "almost-full";</span>
        } else <span class="cstat-no" title="statement not covered">if (0.45 &lt;= moonPhase &amp;&amp; moonPhase &lt; 0.55) {</span>
<span class="cstat-no" title="statement not covered">            return "full-moon";</span>
        } else <span class="cstat-no" title="statement not covered">if (0.55 &lt;= moonPhase &amp;&amp; moonPhase &lt; 0.75) {</span>
<span class="cstat-no" title="statement not covered">            return "almost-old";</span>
        } else <span class="cstat-no" title="statement not covered">if (0.75 &lt;= moonPhase &amp;&amp; moonPhase &lt; 0.9) {</span>
<span class="cstat-no" title="statement not covered">            return "old-moon";</span>
        }
    }
&nbsp;
    return {
        EventBus: _.extend({}, Backbone.Events),
        lodashHelper: {
            convertToDate: convertToDate,
            convertToTime: convertToTime,
            convertToWeekday: convertToWeekday,
            convertToF: convertToF,
            getTimeByOffset: getTimeByOffset,
            getWindDirection: getWindDirection,
            getMoonPhase: getMoonPhase
        },
        getSunPosition: getSunPosition,
        getSunOptions: getSunOptions,
        getCurrentPosition: getCurrentPosition
    };
});</pre>
        </td>
    </tr>
</table></pre>
    <div class='push'></div>
    <!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
    Code coverage
    generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Jan 16 2016 21:40:20 GMT+0200
    (FLE Standard Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
    window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
    };
</script>
<script src="../sorter.js"></script>
</body>
</html>
